{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/collection.service\";\nimport * as i2 from \"src/app/services/refresh.service\";\nimport * as i3 from \"@angular/common\";\nfunction AlbumComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function AlbumComponent_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeFromFavorites());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 8);\n    i0.ɵɵelement(2, \"path\", 9);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AlbumComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AlbumComponent_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.addToFavorites());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 8);\n    i0.ɵɵelement(2, \"path\", 9);\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class AlbumComponent {\n  constructor(collectionService, refreshService) {\n    this.collectionService = collectionService;\n    this.refreshService = refreshService;\n    this.album = {};\n  }\n  ngOnInit() {\n    this.refreshService.refresh$.subscribe(() => {\n      this.album.added_to_collection = !!this.album.added_to_collection;\n    });\n  }\n  AlbumComponent(album) {\n    this.album = album;\n  }\n  getArtistName() {\n    return this.album.artists[0].name;\n  }\n  addToFavorites() {\n    try {\n      var collectionId = localStorage.getItem('collectionId');\n      if (collectionId != undefined) {\n        this.collectionService.addAlbumToCollection(collectionId, this.album).subscribe({\n          error: response => {\n            console.log('Search failed: ' + response.message);\n          },\n          next: () => {\n            this.album.added_to_collection = true;\n            this.refreshService.triggerRefresh();\n          }\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  removeFromFavorites() {\n    try {\n      var collectionId = localStorage.getItem('collectionId');\n      if (collectionId != undefined) {\n        this.collectionService.removeAlbumFromCollection(collectionId, this.album).subscribe({\n          error: response => {\n            console.log('Search failed: ' + response.message);\n          },\n          next: () => {\n            this.album.added_to_collection = false;\n            this.refreshService.triggerRefresh();\n          }\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\nAlbumComponent.ɵfac = function AlbumComponent_Factory(t) {\n  return new (t || AlbumComponent)(i0.ɵɵdirectiveInject(i1.CollectionService), i0.ɵɵdirectiveInject(i2.RefreshService));\n};\nAlbumComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AlbumComponent,\n  selectors: [[\"app-album\"]],\n  inputs: {\n    album: \"album\"\n  },\n  decls: 9,\n  vars: 6,\n  consts: [[1, \"relative\", \"flex\", \"flex-col\", \"items-center\"], [1, \"w-52\", \"h-52\", \"bg-gray-200\", \"rounded-md\"], [1, \"object-cover\", \"w-full\", \"h-full\", \"rounded-md\", 3, \"src\", \"alt\"], [\"class\", \"absolute top-0 right-0 p-2 rounded-25 bg-green-500 hover:bg-red-600 focus:outline-none transition-colors\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"absolute top-0 right-0 p-2 rounded-25 bg-gray-300 hover:bg-green-500 focus:outline-none transition-colors\", 3, \"click\", 4, \"ngIf\"], [1, \"mt-2\", \"text-black\", \"text-center\"], [1, \"mt-1\", \"text-gray-500\", \"text-center\"], [1, \"absolute\", \"top-0\", \"right-0\", \"p-2\", \"rounded-25\", \"bg-green-500\", \"hover:bg-red-600\", \"focus:outline-none\", \"transition-colors\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-4\", \"w-4\", \"m-auto\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 6v6m0 0v6m0-6h6m-6 0H6\"], [1, \"absolute\", \"top-0\", \"right-0\", \"p-2\", \"rounded-25\", \"bg-gray-300\", \"hover:bg-green-500\", \"focus:outline-none\", \"transition-colors\", 3, \"click\"]],\n  template: function AlbumComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵtemplate(3, AlbumComponent_button_3_Template, 3, 0, \"button\", 3);\n      i0.ɵɵtemplate(4, AlbumComponent_button_4_Template, 3, 0, \"button\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"src\", ctx.album.images[0].url != null ? ctx.album.images[0].url : \"assets/music_placeholder.png\", i0.ɵɵsanitizeUrl)(\"alt\", ctx.album.name);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.album.added_to_collection == true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.album.added_to_collection == false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.album.name != \"\" ? ctx.album.name : \"undefined\", \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.album.artists[0].name);\n    }\n  },\n  dependencies: [i3.NgIf],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;;;;IAWIA,iCAIC;IADCA;MAAAA;MAAA;MAAA,OAASA,2CAAqB;IAAA,EAAC;IAE/BA,mBAMC;IANDA,8BAMC;IACCA,0BAKE;IACJA,iBAAM;;;;;;IAERA,kCAIC;IADCA;MAAAA;MAAA;MAAA,OAASA,sCAAgB;IAAA,EAAC;IAE1BA,mBAMC;IANDA,8BAMC;IACCA,0BAKE;IACJA,iBAAM;;;ACvCZ,OAAM,MAAOC,cAAc;EAGzBC,YACUC,iBAAoC,EACpCC,cAA8B;IAD9B,sBAAiB,GAAjBD,iBAAiB;IACjB,mBAAc,GAAdC,cAAc;IAJf,UAAK,GAAkB,EAAmB;EAKhD;EAEHC,QAAQ;IACN,IAAI,CAACD,cAAc,CAACE,QAAQ,CAACC,SAAS,CAAC,MAAK;MAC1C,IAAI,CAACC,KAAK,CAACC,mBAAmB,GAAG,CAAC,CAAC,IAAI,CAACD,KAAK,CAACC,mBAAmB;IACnE,CAAC,CAAC;EACJ;EAEAR,cAAc,CAACO,KAAoB;IACjC,IAAI,CAACA,KAAK,GAAGA,KAAK;EACpB;EAEAE,aAAa;IACX,OAAO,IAAI,CAACF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI;EACnC;EAEAC,cAAc;IACZ,IAAI;MACF,IAAIC,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MACvD,IAAIF,YAAY,IAAIG,SAAS,EAAE;QAC7B,IAAI,CAACd,iBAAiB,CACnBe,oBAAoB,CAACJ,YAAY,EAAE,IAAI,CAACN,KAAK,CAAC,CAC9CD,SAAS,CAAC;UACTY,KAAK,EAAGC,QAAQ,IAAI;YAClBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGF,QAAQ,CAACG,OAAO,CAAC;UACnD,CAAC;UACDC,IAAI,EAAE,MAAK;YACT,IAAI,CAAChB,KAAK,CAACC,mBAAmB,GAAG,IAAI;YACrC,IAAI,CAACL,cAAc,CAACqB,cAAc,EAAE;UACtC;SACD,CAAC;;KAEP,CAAC,OAAON,KAAK,EAAE;MACdE,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;;EAEtB;EAEAO,mBAAmB;IACjB,IAAI;MACF,IAAIZ,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MACvD,IAAIF,YAAY,IAAIG,SAAS,EAAE;QAC7B,IAAI,CAACd,iBAAiB,CACnBwB,yBAAyB,CAACb,YAAY,EAAE,IAAI,CAACN,KAAK,CAAC,CACnDD,SAAS,CAAC;UACTY,KAAK,EAAGC,QAAQ,IAAI;YAClBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGF,QAAQ,CAACG,OAAO,CAAC;UACnD,CAAC;UACDC,IAAI,EAAE,MAAK;YACT,IAAI,CAAChB,KAAK,CAACC,mBAAmB,GAAG,KAAK;YACtC,IAAI,CAACL,cAAc,CAACqB,cAAc,EAAE;UACtC;SACD,CAAC;;KAEP,CAAC,OAAON,KAAK,EAAE;MACdE,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;;EAEtB;;AA9DWlB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAA2B;EAAAC;IAAArB;EAAA;EAAAsB;EAAAC;EAAAC;EAAAC;IAAA;MDV3BjC,8BAAiD;MAE7CA,yBAQE;MACFA,qEAmBS;MACTA,qEAmBS;MACXA,iBAAM;MACNA,8BAAyC;MACvCA,YACF;MAAAA,iBAAM;MACNA,8BAA4C;MAAAA,YAA2B;MAAAA,iBAAM;;;MApDzEA,eAIC;MAJDA,kIAIC;MAKAA,eAAuC;MAAvCA,4DAAuC;MAoBvCA,eAAwC;MAAxCA,6DAAwC;MAqB3CA,eACF;MADEA,oFACF;MAC4CA,eAA2B;MAA3BA,+CAA2B","names":["i0","AlbumComponent","constructor","collectionService","refreshService","ngOnInit","refresh$","subscribe","album","added_to_collection","getArtistName","artists","name","addToFavorites","collectionId","localStorage","getItem","undefined","addAlbumToCollection","error","response","console","log","message","next","triggerRefresh","removeFromFavorites","removeAlbumFromCollection","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\AngularNetVinyl\\ClientApp\\src\\app\\components\\album\\album.component.html","D:\\AngularNetVinyl\\ClientApp\\src\\app\\components\\album\\album.component.ts"],"sourcesContent":["<div class=\"relative flex flex-col items-center\">\r\n  <div class=\"w-52 h-52 bg-gray-200 rounded-md\">\r\n    <img\r\n      [src]=\"\r\n        album.images[0].url != null\r\n          ? album.images[0].url\r\n          : 'assets/music_placeholder.png'\r\n      \"\r\n      [alt]=\"album.name\"\r\n      class=\"object-cover w-full h-full rounded-md\"\r\n    />\r\n    <button\r\n      *ngIf=\"album.added_to_collection == true\"\r\n      class=\"absolute top-0 right-0 p-2 rounded-25 bg-green-500 hover:bg-red-600 focus:outline-none transition-colors\"\r\n      (click)=\"removeFromFavorites()\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        class=\"h-4 w-4 m-auto\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n        stroke=\"currentColor\"\r\n      >\r\n        <path\r\n          stroke-linecap=\"round\"\r\n          stroke-linejoin=\"round\"\r\n          stroke-width=\"2\"\r\n          d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\r\n        />\r\n      </svg>\r\n    </button>\r\n    <button\r\n      *ngIf=\"album.added_to_collection == false\"\r\n      class=\"absolute top-0 right-0 p-2 rounded-25 bg-gray-300 hover:bg-green-500 focus:outline-none transition-colors\"\r\n      (click)=\"addToFavorites()\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        class=\"h-4 w-4 m-auto\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n        stroke=\"currentColor\"\r\n      >\r\n        <path\r\n          stroke-linecap=\"round\"\r\n          stroke-linejoin=\"round\"\r\n          stroke-width=\"2\"\r\n          d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\r\n        />\r\n      </svg>\r\n    </button>\r\n  </div>\r\n  <div class=\"mt-2 text-black text-center\">\r\n    {{ album.name != \"\" ? album.name : \"undefined\" }}\r\n  </div>\r\n  <div class=\"mt-1 text-gray-500 text-center\">{{ album.artists[0].name }}</div>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { AlbumResponse } from 'src/app/interfaces/Spotify/Search/AlbumResponse';\r\nimport { CollectionService } from 'src/app/services/collection.service';\r\nimport { ChangeDetectorRef } from '@angular/core';\r\nimport { RefreshService } from 'src/app/services/refresh.service';\r\n\r\n@Component({\r\n  selector: 'app-album',\r\n  templateUrl: './album.component.html',\r\n})\r\nexport class AlbumComponent {\r\n  @Input() album: AlbumResponse = {} as AlbumResponse;\r\n\r\n  constructor(\r\n    private collectionService: CollectionService,\r\n    private refreshService: RefreshService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.refreshService.refresh$.subscribe(() => {\r\n      this.album.added_to_collection = !!this.album.added_to_collection;\r\n    });\r\n  }\r\n\r\n  AlbumComponent(album: AlbumResponse) {\r\n    this.album = album;\r\n  }\r\n\r\n  getArtistName(): string {\r\n    return this.album.artists[0].name;\r\n  }\r\n\r\n  addToFavorites() {\r\n    try {\r\n      var collectionId = localStorage.getItem('collectionId');\r\n      if (collectionId != undefined) {\r\n        this.collectionService\r\n          .addAlbumToCollection(collectionId, this.album)\r\n          .subscribe({\r\n            error: (response) => {\r\n              console.log('Search failed: ' + response.message);\r\n            },\r\n            next: () => {\r\n              this.album.added_to_collection = true;\r\n              this.refreshService.triggerRefresh();\r\n            },\r\n          });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  removeFromFavorites() {\r\n    try {\r\n      var collectionId = localStorage.getItem('collectionId');\r\n      if (collectionId != undefined) {\r\n        this.collectionService\r\n          .removeAlbumFromCollection(collectionId, this.album)\r\n          .subscribe({\r\n            error: (response) => {\r\n              console.log('Search failed: ' + response.message);\r\n            },\r\n            next: () => {\r\n              this.album.added_to_collection = false;\r\n              this.refreshService.triggerRefresh();\r\n            },\r\n          });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}